<html>
  <head>
    <script src="dist/asti.js"></script>
  </head>
  <body>
    <script>
      var asti = new ASTI('http://localhost:10000');
      /*
      asti.call('SIP/1000', 'default', '1000', '')
        .then(function (response) {
          return response.text();
        }).then(function (body) {
          document.body.innerHTML = body;
        });
      */
      var handler = function (evt) {
        console.log(evt);
      };

      asti.connect(function () {
        asti.agent.subscribe({
          agent: 'SIP/6000',
          onAgentConnect: handler,
          onAgentCalled: handler,
          onAgentComplete: handler,
          onAgentRingNoAnswer: handler
        });

        asti.agent.subscribe({
          agent: 'SIP/6050',
          onAgentConnect: handler,
          onAgentCalled: handler,
          onAgentComplete: handler,
          onAgentRingNoAnswer: handler
        });

        asti.queue.list(function (data) {
          console.log('queue:list', data);
          data.forEach(function (queue) {
            console.log('queue:', queue.queue);

            asti.queue.members({queue: queue.queue}, function (data) {
              data.forEach(function (member) {
                console.log('-- member:', member.location);
              })
            })
          })
        });

      });

    </script>
  </body>
</html>